from builtins import str
from builtins import object
from enum import IntEnum


class HAlign(IntEnum):
    Left = -4131,
    Right = -4152,
    Center = -4108


class VAlign(IntEnum):
    Bottom = -4107,
    Center = -4108,
    # Distributed = -4117,
    # Justify = -4130,
    Top = -4160

    
def fill_object(prototype, subject):
    if hasattr(prototype, '__dict__'):
        vs = vars(prototype)

        for prop, value in list(vs.items()):
            if not prop.startswith('__') and hasattr(subject, prop):
                setattr(subject, prop, getattr(prototype, prop))


def parse_integer(value):
    """
        Returns an integer representation of the value in value
        :param value: the value to check
        :return: The int if it is an integer, None otherwise
        """
    try:
        return int(value)
    except ValueError:
        try:
            # To avoid error in case of '0.0'
            return int(float(value))
        except ValueError:
            return None


def parse_float(value):
    """
    Returns a float representation of the value in value
    :param value: the value to check
    :return: The float if it is float, None otherwise
    """
    try:
        return float(value)
    except ValueError:
        return None


def get_similarity_rate(obj1, obj2, ignore_basic_attr=True):
    """
    Determines the similarity of obj2 to obj1, obj1 is the prototype
    :param ignore_basic_attr: weather to ignore attributes such as __dict__
    :param obj1: the prototype
    :param obj2: the subject
    :return: the similarity rate
    """
    if obj2 is None:
        return 1

    result = calculate_similarity(obj1, obj2, ignore_basic_attr)

    rate = result.get_rate()

    return rate


def calculate_similarity(obj1, obj2, ignore_basic_attr=True, sim_data=None):
    if sim_data is None:
        sim_data = SimilarData()

    if hasattr(obj1, '__dict__'):
        vs = vars(obj1)

        for prop, value in list(vs.items()):
            if ignore_basic_attr and not prop.startswith('__'):
                sim_data.add_to_prototype(str(prop))
                if hasattr(obj2, prop):
                    sim_data.add_to_subject(str(prop))
                    calculate_similarity(getattr(obj1, prop), getattr(obj2, prop), ignore_basic_attr,
                                         sim_data)

    return sim_data


class SimilarData(object):
    def __init__(self):
        self.prototype_props = []
        self.subject_props = []

    def add_to_prototype(self, prop):
        self.prototype_props.append(prop)

    def add_to_subject(self, prop):
        self.subject_props.append(prop)

    def get_rate(self):
        return len(self.subject_props) / float(len(self.prototype_props))
